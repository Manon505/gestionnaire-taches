<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager-Eisenhower</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Gestionnaire de T√¢ches</h1>
            <div class="header-buttons">
                <button class="legend-btn" id="legendBtn" title="Voir la l√©gende Eisenhower">
                    i
                </button>
                <button class="settings-btn" id="settingsBtn" title="Configurer les questions">
                    ‚öô
                </button>
                <button class="add-task-btn" id="addTaskModalBtn" title="Cr√©er une nouvelle t√¢che">
                    +
                </button>
            </div>
        </div>
        
        <div id="statusMessage"></div>

        <div class="kanban-board">
            <!-- Colonne √Ä Faire -->
            <div class="kanban-column column-todo" data-status="todo">
                <div class="column-header">
                    üìù √Ä Faire
                    <span class="task-count" id="todoCount">0</span>
                </div>
                <div class="tasks-container" id="todoTasks">
                    <div class="empty-column">Aucune t√¢che √† faire</div>
                </div>
            </div>

            <!-- Colonne En Cours -->
            <div class="kanban-column column-inprogress" data-status="inprogress">
                <div class="column-header">
                    ‚ö° En Cours
                    <span class="task-count" id="inprogressCount">0</span>
                </div>
                <div class="tasks-container" id="inprogressTasks">
                    <div class="empty-column">Aucune t√¢che en cours</div>
                </div>
            </div>

            <!-- Colonne Termin√©es -->
            <div class="kanban-column column-done" data-status="done">
                <div class="column-header">
                    ‚úÖ Termin√©es
                    <span class="task-count" id="doneCount">0</span>
                </div>
                <div class="tasks-container" id="doneTasks">
                    <div class="empty-column">Aucune t√¢che termin√©e</div>
                </div>
            </div>	
        </div>
        
        <div class="drag-instructions">
            üí° <strong>Astuce :</strong> Vous pouvez d√©placer les t√¢ches en les glissant d'une colonne √† l'autre avec la souris !
        </div>	
    </div>

    <!-- Modal pour cr√©er une t√¢che -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ú® Cr√©er une nouvelle t√¢che</h2>
                <button class="close-btn" id="closeModalBtn">√ó</button>
            </div>
            
            <form class="task-form" id="taskForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">Titre de la t√¢che</label>
                        <input type="text" id="title" name="title" required placeholder="Entrez le titre de la t√¢che">
                    </div>
                    
                    <div class="form-group">
                        <label for="dueDate">√âch√©ance finale</label>
                        <input type="date" id="dueDate" name="dueDate" placeholder="Date limite de fin">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="estimatedDuration">Dur√©e estim√©e (en heures)</label>
                        <input type="number" id="estimatedDuration" name="estimatedDuration" min="0.5" step="0.5" placeholder="Ex: 2.5">
                    </div>
                    
                    <div class="form-group">
                        <label for="startDeadline">Date limite pour commencer</label>
                        <input type="date" id="startDeadline" name="startDeadline" readonly class="calculated-field">
                        <small style="color: #666; font-size: 0.8em;">Calcul√©e automatiquement</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" placeholder="Description d√©taill√©e de la t√¢che"></textarea>
                </div>

                <!-- Section d'√©valuation Eisenhower obligatoire -->
                <div class="evaluation-section" id="evaluationSection">
                    <h3>üéØ √âvaluation Eisenhower (obligatoire)</h3>
                    
                    <div class="questions-grid" id="questionsGrid">
                        <!-- Les questions seront g√©n√©r√©es dynamiquement -->
                    </div>

                    <!-- R√©sultat de l'√©valuation -->
                    <div class="evaluation-result hidden" id="evaluationResult">
                        <div class="result-quadrant"></div>
                        <div class="result-description"></div>
                    </div>
                </div>
            </form>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Annuler</button>
                <button type="submit" class="btn" id="addTaskBtn" disabled form="taskForm">+ Cr√©er la t√¢che</button>
            </div>
        </div>
    </div>

    <!-- Modal pour configurer les questions -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚öôÔ∏è Configuration du Questionnaire Eisenhower</h2>
                <button class="close-btn" id="closeSettingsBtn">√ó</button>
            </div>
            
            <div class="question-config-section">
                <h3>Configuration des Questions</h3>
                
                <div class="minimum-questions-warning">
                    <span class="icon">‚ö†Ô∏è</span>
                    <span>Attention : Vous devez conserver au minimum <strong>3 questions</strong> dans chaque cat√©gorie pour garantir une √©valuation pr√©cise.</span>
                </div>
                
                <div class="question-config-category">
                    <h4>üìà Questions sur l'IMPORTANCE</h4>
                    <div id="importanceQuestionsConfig"></div>
                    <button type="button" class="btn-small btn-add" id="addImportanceQuestion">+ Ajouter une question</button>
                </div>
                
                <div class="question-config-category">
                    <h4>‚ö° Questions sur l'URGENCE</h4>
                    <div id="urgencyQuestionsConfig"></div>
                    <button type="button" class="btn-small btn-add" id="addUrgencyQuestion">+ Ajouter une question</button>
                </div>
                
                <div class="config-actions">
                    <button type="button" class="btn btn-danger" id="resetQuestionsBtn">üîÑ Restaurer par d√©faut</button>
                    <button type="button" class="btn btn-secondary" id="cancelSettingsBtn">Annuler</button>
                    <button type="button" class="btn" id="saveSettingsBtn">üíæ Sauvegarder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour la l√©gende Eisenhower -->
    <div class="modal" id="legendModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üìä L√©gende des √âvaluations Eisenhower</h2>
                <button class="close-btn" id="closeLegendBtn">√ó</button>
            </div>
            
            <div class="eisenhower-legend">
                <div class="legend-grid">
                    <div class="legend-item">
                        <div class="legend-badge urgent-important">√Ä TRAITER</div>
                        <div class="legend-description">Urgent, important</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-badge important-not-urgent">√Ä PLANIFIER</div>
                        <div class="legend-description">Important, pas urgent</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-badge urgent-not-important">√Ä D√âL√âGUER</div>
                        <div class="legend-description">Urgent, pas important</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-badge not-urgent-not-important">√Ä ABANDONNER</div>
                        <div class="legend-description">Pas urgent, pas important</div>
                    </div>
                </div>
                
                <div class="legend-explanations">
                    <h3>üéØ Principe de la Matrice d'Eisenhower</h3>
                    <p>Cette m√©thode vous aide √† prioriser vos t√¢ches selon deux crit√®res :</p>
                    <ul>
                        <li><strong>Importance :</strong> La t√¢che contribue-t-elle √† vos objectifs ?</li>
                        <li><strong>Urgence :</strong> La t√¢che n√©cessite-t-elle une action imm√©diate ?</li>
                    </ul>
                    <p><strong>Nouveaut√© :</strong> L'urgence est maintenant calcul√©e en combinant vos r√©ponses au questionnaire avec les √©ch√©ances que vous d√©finissez.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour √©diter une t√¢che -->
    <div class="modal" id="editTaskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚úèÔ∏è Modifier la t√¢che</h2>
                <button class="close-btn" id="closeEditModalBtn">√ó</button>
            </div>
            
            <form class="task-form" id="editTaskForm">
                <input type="hidden" id="editTaskId" name="taskId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editTitle">Titre de la t√¢che</label>
                        <input type="text" id="editTitle" name="title" required placeholder="Entrez le titre de la t√¢che">
                    </div>
                    
                    <div class="form-group">
                        <label for="editDueDate">√âch√©ance finale</label>
                        <input type="date" id="editDueDate" name="dueDate">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editEstimatedDuration">Dur√©e estim√©e (en heures)</label>
                        <input type="number" id="editEstimatedDuration" name="estimatedDuration" min="0.5" step="0.5">
                    </div>
                    
                    <div class="form-group">
                        <label for="editStartDeadline">Date limite pour commencer</label>
                        <input type="date" id="editStartDeadline" name="startDeadline" readonly class="calculated-field">
                        <small style="color: #666; font-size: 0.8em;">Calcul√©e automatiquement</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editDescription">Description</label>
                    <textarea id="editDescription" name="description" placeholder="Description d√©taill√©e de la t√¢che"></textarea>
                </div>

                <!-- Section d'√©valuation Eisenhower pour modification -->
                <div class="evaluation-section" id="editEvaluationSection">
                    <h3>üéØ R√©√©valuation Eisenhower (optionnelle)</h3>
                    <p class="evaluation-note">Vous pouvez modifier l'√©valuation de cette t√¢che si n√©cessaire.</p>
                    
                    <div class="questions-grid" id="editQuestionsGrid">
                        <!-- Les questions seront g√©n√©r√©es dynamiquement -->
                    </div>

                    <!-- R√©sultat de l'√©valuation -->
                    <div class="evaluation-result hidden" id="editEvaluationResult">
                        <div class="result-quadrant"></div>
                        <div class="result-description"></div>
                    </div>
                </div>
            </form>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelEditBtn">Annuler</button>
                <button type="submit" class="btn" id="saveTaskBtn" form="editTaskForm">üíæ Sauvegarder</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>